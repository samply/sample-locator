<div fxLayout="row" fxLayoutAlign="space-between stretch">
  <div fxFlex="1 0 0"></div>

  <div class="bbmri-container">
    <div fxLayout="row nowrap" fxLayoutAlign="space-between stretch">
      <div fxFlex="0 1 50%">
        <h2>Search</h2>

        <div *ngIf="!(mdrFieldProviderService.ready$ | async)">
          Waiting for data from Metadata Repository
          <p-progressBar mode="indeterminate" [style]="{'height': '6px'}"></p-progressBar>
        </div>

        <!--suppress HtmlUnknownAttribute -->
        <app-search-builder headerName="Donor/Clinical Information"
                            disabled="true"
                            [mdrEntities]="mdrEntitiesDonor"></app-search-builder>
        <!--suppress HtmlUnknownAttribute -->
        <app-search-builder headerName="Sample"
                            disabled="true"
                            [mdrEntities]="mdrEntitiesSample"></app-search-builder>

        <div class="margin-action-buttons"
             fxLayout="row"
             fxLayoutAlign="end">
          <div fxLayout="row"
               fxLayout.lt-md="column-reverse"
               fxLayoutAlign="end"
               fxLayoutAlign.lt-md="start">
            <app-samply-button [imageIcon]="faTimes"
                               [active]="true"
                               label="Clear"
                               (click)="resetQuery()"></app-samply-button>
            <app-samply-button [imageIcon]="faEdit"
                               [active]="true"
                               label="Edit"
                               (click)="editQuery()"></app-samply-button>
            <app-samply-button [imageIcon]="faPaperPlane" [active]="false" label="Send"></app-samply-button>
          </div>
        </div>
      </div>

      <div fxFlex="0 0 1px" class="divider"></div>

      <div fxFlex="0 1 50%">
        <h2>Result</h2>

        <!-- SHOW SIMPLE RESULT -->
        <div class="result-extra-margin">
          <div *ngIf="!userService.getLoginValid()"
               class="result-item">
            <app-simple-result [biobanksAnswered]="biobanksAnswered"
                               [sumDonors]="sumDonors"
                               [sumSamples]="sumSamples"></app-simple-result>
          </div>
        </div>

        <!-- SHOW DETAILED RESULT -->
        <div *ngIf="userService.getLoginValid()"
             class="no-transition">
          <div *ngIf="!isResultAnonymous()">
            <app-detailed-result [detailedResult]="detailedResult"
                                 [biobanksAnswered]="biobanksAnswered"
                                 [sumSamples]="sumSamples"
                                 [sumDonors]="sumDonors"></app-detailed-result>
          </div>
        </div>

        <div class="result-progressbar">
          <div *ngIf="showProcessingBar && !userService.getLoginValid()">
            <p-progressBar [value]="elapsedPercentage"
                           [showValue]="false"
                           [style]="{'height': '6px'}"></p-progressBar>
            Searching in {{limitBiobanksAnswered}} biobanks for 60 seconds...
          </div>

          <div class="disclaimer">
            <div *ngIf="!showProcessingBar">
              <div>
                Most results have been received after one minute.
                However, in some cases it might take up to five minutes for the last results to appear.
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div fxFlex="1 0 0"></div>
</div>
